<!-- @format -->
<%if(status != 404){%>
<div class="single-listing-wrapper">
  <div class="single_listing">
    
    <!-- IMAGE CAROUSEL -->
    <div class="single-result-image">
      <div id="carouselExampleFade" class="carousel slide carousel-fade" data-bs-ride="carousel">
        <div class="carousel-inner">
          <% if(photos != null){ %>
            <% photos.forEach(function(result, index){%>
              <div class="carousel-item">
                <!-- single-image -->
                <img src=<%-result.href%> alt="">
              </div>
            <% }) %>
          <% }else { %>
                <img src="https://www.eduprizeschools.net/wp-content/uploads/2016/06/No_Image_Available.jpg">
          <%}%>
        </div>
      </div>
      <div class="carousel-buttons">
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
    </div>
    <!-- END CAROUSEL -->

    <div class="single-result-details">
      
      <div class="single-address"><%-address%>., <%-city%>, <%-state_code%> <%-postal_code%></div>
      <div class="detail-tabs">
        <ul>
          <li class="tab-active" id="generalTab">General</li>
          <li id="descriptionTab">Description</li>
        </ul>
      </div>
      <div class="general-info">
        <div class="primary-status"><%- type.replace(/_/g, " ").toUpperCase().slice(0,6) %>  |  <%- status.replace(/_/g, " ").toUpperCase() %> | ID: <%-property_id%></div>
        <div class="single-price">$<%-price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");%></div>
        <div class="stats">
          <ul class="single-amenities">
            <li>
              <i class="fas fa-bed"></i
              ><span class="amenity-num"> <%-beds%></span> Bedrooms
            </li>
            <li>
              <i class="fas fa-bath"></i
              ><span class="amenity-num"> <%-full_baths%></span> Bathrooms
            </li>
            <li>
              <i class="fas fa-ruler"></i
              ><span class="amenity-num"> <%-footage.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");%></span> Square Feet
            </li>
          </ul>
        </div>
        <div class="agent_info">
          
            <%//if(result.type != null){%>
            <div>Listing Agent: <%-agent_name%> <a href=""><%-agent_num%></a></div>
            <%//}%>
        </div>
      </div>
      <div id="map"></div>
        <!-- Async script executes immediately and must be after any DOM elements used in callback. -->
        <script
        src="https://maps.googleapis.com/maps/api/js?key=<%=GEO_API_KEY%>&callback=initMap&libraries=&v=weekly"
        async
        ></script>

        <div class="single-desc">
          <p class="ticket-text">
            <%-description%>
          </p>

          <div class="single-address">Appliances</div>
            <hr>
          <% details.forEach((detail)=>{%>
            
            <p>
              <%- detail%>
            </p>
          <%})%>
       
        </div>
      </div>
  </div>
</div>
<%}else{%>
  <h2>Data not available at this time</h2>
  <%}%>
<script>

// ***************PAGINATION AND RESULT NUMBER 40 DEFAULT

  document.getElementsByClassName('carousel-inner')[0].firstElementChild.classList.add('active');

  //smaller images align center with class widthStyle
  var getImage = document.querySelector('.carousel-inner').children;
  for (let i = 0; i < getImage.length; i++) {
    const element = getImage[i];
    var item = element.children;
    var imageWidth = item[0].naturalWidth
    if(imageWidth < 1024){
      item[0].classList.add('widthStyle')
    }
  }
</script>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>
</body>
</html>

